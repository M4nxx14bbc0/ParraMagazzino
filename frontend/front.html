<!-- Pagina di esercizio e correzione
    Si prega di considerarlo solo come un'esercitazione di classe.
    Contiene altri argomenti e codici estratti da altri compiti o risorse esterne.
-->
<html>
    <head>
        <title>My magazzino</title>
    </head>
    <body>
        <h1>Gestisci i tuoi prodotti</h1>
        <h3>Inserisci un nuovo tipo di prodotto</h3>
        <fieldset>
            <p><input type="text" id="codice" placeholder="123456789" required></p>
            <p><input type="text" id="nome" placeholder="nome" required></p>
            <p><input type="number" id="num" min=1 value=1></p>
            <p><button type="submit" id="b1">Add</button></p>
        </fieldset>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
        <script>
            $('#b1').click(()=>{
                var codice = $('#codice').val();
                var nome = $('#nome').val();
                var quantita = $('#num').val();
                console.log("Valori", codice, nome, quantita);
                $.ajax({
                    url: "http://localhost:3000/api/insertNewElement?codice="+codice+"&nome="+nome+"&quantita="+quantita,
                    method: "GET",
                    success: (data)=>{
                        $('#table').append("<tr><td>"+codice+"</td><td>"+nome+"</td><td><button id='"+codice+"'>-</button>"+quantita+"<button type='submit' id='"+codice+"'>+</button></td></tr>");
                    },
                    error: (err)=>{
                        alert(err);
                    }
                });
            });

            var update = ()=>{
                $.ajax({
                    url: "http://localhost:3000/api/getAllElements",
                    method: "GET",
                    success: (data)=>{
                        console.log(data);
                    },
                    error: (err)=>{
                        alert(err);
                    }
                });
            };
            
        </script>
        <fieldset>
            <table id="table">
                <tr><th>Codice</th><th>Nome</th><th>Quantit√†</th></tr>
            </table>
        </fieldset>
    </body>
</html>