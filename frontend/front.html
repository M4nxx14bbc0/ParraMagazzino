<!-- Pagina di esercizio e correzione
    Si prega di considerarlo solo come un'esercitazione di classe.
    Contiene altri argomenti e codici estratti da altri compiti o risorse esterne.
-->
<html>
    <head>
        <title>My magazzino</title>
    </head>
    <body>
        <h1>Inserire email e password</h1>
        <fieldset>
            <p><input type="email" name="email" id="email" placeholder="user@example.com" required></p>
            <p><input type="password" name="pass" id="pass" placeholder="password" required></p>
            <p><button type="submit" id="b1">Send</button> <button type="reset" id="b2">Reset</button></p>
        </fieldset>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
        <script>
            $('#b1').click(()=>{
                if($('#email').val() && $('#pass').val()){
                    console.log('Valori : ', $('#email').val(), $('#pass').val());
                    $.ajax({
                        url: "http://localhost:3000/api/login?usrn="+$('#email').val()+"&pswd="+$('#pass').val(),
                        query: "",
                        method: "GET",
                        success: (data)=>{
                            $('body').css("background-color", "red");
                            window.location.href="home.html";
                            window.location.replace("home.html"); //rimuove dalla storia di navigazione
                        },
                        error: (err)=>{
                            $('body').css("background-color", "red");
                        }
                    });
                }
            });
        </script>
    </body>
</html>